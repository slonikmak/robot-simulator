# Plan for Issue #1: Align simulation with hardware capabilities

Align the robot simulator's behavior and physics with the real hardware (Arduino, HC-SR04, color sensor) as identified in `AUDIT.md`.

Goal: The simulation accurately reflects hardware constraints, preventing unrealistic expectations.

## Steps
- [ ] Narrow Ultrasonic sensor FOV from 60° to 15° in `robot.js`.
- [ ] Replace absolute coordinate-based return-to-clutch logic with relative/boundary-based logic in `firmware.js`.
- [ ] Update color sensor simulation in `robot.js` to better reflect TCS230/IR line sensor limitations.
- [ ] Adjust `WAKE_DIST_FROM_BOUNDARY` and interaction logic to match realistic HC-SR04 range and zone size.
- [ ] Implement iterative "search" behavior (rotation) when the target is lost due to narrow FOV.
- [ ] Verify that the robot can still "protect" the clutch area using only relative movements and boundary detections.

## Acceptance
- Ultrasonic sensor FOV is exactly 15 degrees.
- Robot no longer uses hidden global `x, y` of clusters for navigation (relative logic only).
- Robot behavior remains stable within the 2m radius zone.
- Code in `firmware.js` remains portable to Arduino (no heavy math beyond standard libraries).

Spec: R-001, R-002, R-003, R-004 (to be updated in spec.md)
